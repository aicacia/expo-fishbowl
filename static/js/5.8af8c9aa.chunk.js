(this.webpackJsonp=this.webpackJsonp||[]).push([[5],{910:function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"i",(function(){return u})),n.d(e,"d",(function(){return d})),n.d(e,"c",(function(){return l})),n.d(e,"a",(function(){return p})),n.d(e,"h",(function(){return b})),n.d(e,"e",(function(){return m})),n.d(e,"f",(function(){return h})),n.d(e,"g",(function(){return O}));var r=n(916),c=n(920),o=Object(c.Record)({name:"",team:0});function u(t){return Object.keys(t).reduce((function(e,n){return e.set(n,function(t){return o({name:t.name,team:t.team})}(t[n]))}),Object(c.Map)())}var a=Object(c.Record)({text:""});function i(t){return a({text:t.text})}function f(t){return Object.keys(t).reduce((function(e,n){return e.set(n,Object(c.List)(t[n].map(i)))}),Object(c.Map)())}var s=Object(c.Record)({peers:Object(c.Map)(),teams:Object(c.List)(["Team 1","Team 2"]),cards:Object(c.Map)()});function d(t){return s({peers:u(t.peers),teams:Object(c.List)(t.teams),cards:f(t.cards)})}var l="game",p=s(),b=Object(r.createActionWithPayload)(l+".sync"),m=Object(r.createActionWithPayload)(l+".set-name"),h=Object(r.createActionWithPayload)(l+".set-team"),O=Object(r.createActionWithPayload)(l+".set-team-name")},911:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return f}));var r=n(11),c=n.n(r),o=n(916),u=n(924),a=n(910),i=new o.State(c()({},a.c,a.a),c()({},a.c,a.d)),f=(Object(u.createConnect)(i),Object(u.createHook)(i))},912:function(t,e,n){"use strict";n.d(e,"a",(function(){return O})),n.d(e,"b",(function(){return j}));var r=n(52),c=n.n(r),o=n(17),u=n.n(o),a=n(262),i=n(917),f=n(0),s=n(915),d=n(918),l=n.n(d),p=n(913),b=Object(a.none)(),m=Object(a.none)(),h=new s.EventEmitter;function O(){return new Promise((function(t){return m.ifSome(t).ifNone((function(){return h.once("peer",t)}))}))}function j(){var t=Object(f.useState)(m.toJS()),e=u()(t,2),n=e[0],r=e[1];return Object(f.useEffect)((function(){null===n&&O().then(r)}),[n]),n}!function(){var t,e;c.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=p.a,n.next=3,c.a.awrap(Object(p.b)());case 3:return n.t1=n.sent,t=(0,n.t0)(n.t1),n.next=7,c.a.awrap(i.Peer.create(new l.a(t)));case 7:(e=n.sent).on("error",(function(t){console.error(t)})),b.replace(t),m.replace(e),h.emit("peer-id",t),h.emit("peer",e);case 13:case"end":return n.stop()}}),null,null,null,Promise)}()},913:function(t,e,n){"use strict";n.d(e,"a",(function(){return s})),n.d(e,"c",(function(){return d})),n.d(e,"b",(function(){return l}));var r=n(52),c=n.n(r),o=n(262),u=n(922),a="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",i="fishbowl-aicacia-com-";function f(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6;return Object(o.range)(0,t).iter().map((function(){return a.charAt(Math.floor(Math.random()*a.length))})).toArray().join("")}function s(t){return i+t}function d(t){return t.substring(i.length)}function l(){var t,e,n=arguments;return c.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:6,r.next=3,c.a.awrap(u.a.getItem("ID"));case 3:if(!(e=r.sent)){r.next=8;break}return r.abrupt("return",e);case 8:return e=f(t),r.next=11,c.a.awrap(u.a.setItem("ID",e));case 11:return r.abrupt("return",e);case 12:case"end":return r.stop()}}),null,null,null,Promise)}},914:function(t,e,n){"use strict";n.d(e,"e",(function(){return p})),n.d(e,"c",(function(){return b})),n.d(e,"d",(function(){return m})),n.d(e,"f",(function(){return h})),n.d(e,"a",(function(){return r.b})),n.d(e,"b",(function(){return r.c})),n.d(e,"g",(function(){return O})),n.d(e,"h",(function(){return j}));var r=n(910),c=n(911),o=n(912),u=n(926),a=c.a.getStore(r.c);function i(t,e,n){return t.update("peers",(function(t){var c=t.get(e,Object(r.b)());return t.set(e,n(c))}))}function f(t,e,n){return i(t,e,(function(t){return t.set("name",n)}))}function s(t,e,n){return i(t,e,(function(t){return t.set("team",n)}))}function d(t,e,n){return t.update("teams",(function(t){return t.set(e,n)}))}function l(t,e){return t.update("peers",(function(t){return t.merge(e)}))}var p=Object(u.debounce)((function(t,e){!function(t,e){a.update((function(n){return d(n,t,e)}))}(t,e),Object(o.a)().then((function(n){return n.broadcast(r.g.create({team:t,name:e}))}))}),500),b=Object(u.debounce)((function(t,e){!function(t,e){a.update((function(n){return f(n,t,e)}))}(t,e),Object(o.a)().then((function(n){return n.broadcast(r.e.create({id:t,name:e}))}))}),500);function m(t,e){!function(t,e){a.update((function(n){return s(n,t,e)}))}(t,e),Object(o.a)().then((function(n){return n.broadcast(r.f.create({id:t,team:e}))}))}function h(t,e){return r.e.is(e)?f(t,e.payload.id,e.payload.name):r.f.is(e)?s(t,e.payload.id,e.payload.team):r.g.is(e)?d(t,e.payload.team,e.payload.name):r.h.is(e)?l(t,Object(r.i)(e.payload.peers)):t}function O(t){return t[r.c].peers}function j(t){return t[r.c].teams}Object(o.a)().then((function(t){t.on("connection",(function(e){t.send(e,r.h.create(a.getCurrent().toJS()))}))}))},919:function(t,e){function n(t){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id=919},921:function(t,e,n){"use strict";var r=n(11),c=n.n(r),o=n(916),u=n(912),a=n(914),i=n(911);n.d(e,"a",(function(){return i.b}));var f=Object(o.createDispatcher)(i.a,Object(o.mergeReducers)(c()({},a.b,a.f)));Object(u.a)().then((function(t){t.on("message",f)}))},931:function(t,e,n){var r=n(932);function c(t){var e=function(){return e.called?e.value:(e.called=!0,e.value=t.apply(this,arguments))};return e.called=!1,e}function o(t){var e=function(){if(e.called)throw new Error(e.onceError);return e.called=!0,e.value=t.apply(this,arguments)},n=t.name||"Function wrapped with `once`";return e.onceError=n+" shouldn't be called more than once",e.called=!1,e}t.exports=r(c),t.exports.strict=r(o),c.proto=c((function(){Object.defineProperty(Function.prototype,"once",{value:function(){return c(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return o(this)},configurable:!0})}))},932:function(t,e){t.exports=function t(e,n){if(e&&n)return t(e)(n);if("function"!==typeof e)throw new TypeError("need wrapper function");return Object.keys(e).forEach((function(t){r[t]=e[t]})),r;function r(){for(var t=new Array(arguments.length),n=0;n<t.length;n++)t[n]=arguments[n];var r=e.apply(this,t),c=t[t.length-1];return"function"===typeof r&&r!==c&&Object.keys(c).forEach((function(t){r[t]=c[t]})),r}}},933:function(t){t.exports=JSON.parse('{"a":"41A895CA"}')},943:function(t,e,n){"use strict";n.r(e),n.d(e,"Game",(function(){return O}));var r=n(0),c=n.n(r),o=n(5),u=n(6),a=n(48),i=n(931),f=n.n(i),s=n(933);function d(t){return l(),c.a.createElement(o.a,t,c.a.createElement("google-cast-launcher",null))}var l=f()((function(){window.__onGCastApiAvailable=function(t,e){t?cast.framework.CastContext.getInstance().setOptions({receiverApplicationId:s.a,autoJoinPolicy:chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED}):console.error(e)};var t=document.createElement("script");t.src="//www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1",document.body.appendChild(t)})),p=n(914),b=n(921),m=n(912),h=u.a.create({castButton:{position:"absolute",right:8,top:8,width:32,height:32}});function O(t){var e=Object(m.b)(),n=Object(b.a)(p.g),r=Object(b.a)(p.h);return console.log(e,n,r),c.a.createElement(o.a,null,c.a.createElement(a.Text,null,"Hello, world ",t.id,"!"),c.a.createElement(d,{style:h.castButton}))}}}]);
//# sourceMappingURL=5.8af8c9aa.chunk.js.map