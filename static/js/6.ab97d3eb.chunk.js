(this.webpackJsonp=this.webpackJsonp||[]).push([[6],{912:function(t,e,n){"use strict";n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return u})),n.d(e,"e",(function(){return b})),n.d(e,"d",(function(){return p})),n.d(e,"b",(function(){return m})),n.d(e,"k",(function(){return O})),n.d(e,"h",(function(){return j})),n.d(e,"g",(function(){return h})),n.d(e,"i",(function(){return v})),n.d(e,"j",(function(){return y})),n.d(e,"f",(function(){return w}));var r=n(921),c=n(926),a=Object(c.Record)({name:"",team:0});function o(t){return Object.keys(t).reduce((function(e,n){return e.set(n,function(t){return a({name:t.name,team:t.team})}(t[n]))}),Object(c.Map)())}var u,i=Object(c.Record)({text:""});function s(t){return i({text:t.text})}function f(t){return Object.keys(t).reduce((function(e,n){return e.set(n,Object(c.List)(t[n].map(s)))}),Object(c.Map)())}function d(t){return Object.keys(t).reduce((function(e,n){return e.set(+n,t[n])}),Object(c.Map)())}!function(t){t[t.None=0]="None",t[t.Lobby=1]="Lobby",t[t.Started=2]="Started",t[t.Finish=3]="Finish"}(u||(u={}));var l=Object(c.Record)({state:u.None,peers:Object(c.Map)(),teams:d({0:"Team 1",1:"Team 2"}),cards:Object(c.Map)()});function b(t){return l({state:t.state,peers:o(t.peers),teams:d(t.teams),cards:f(t.cards)})}var p="game",m=l(),O=Object(r.createActionWithPayload)(p+".sync"),j=Object(r.createActionWithPayload)(p+".set-state"),h=Object(r.createActionWithPayload)(p+".set-name"),v=Object(r.createActionWithPayload)(p+".set-team"),y=Object(r.createActionWithPayload)(p+".set-team-name");function g(t,e,n){return t.update("peers",(function(t){return t.set(e,n(t.get(e)||a()))}))}function w(t,e){return h.is(e)?g(t,e.payload.id,(function(t){return t.set("name",e.payload.name)})):v.is(e)?g(t,e.payload.id,(function(t){return t.set("team",e.payload.team)})):y.is(e)?t.update("teams",(function(t){return t.set(e.payload.team,e.payload.name)})):O.is(e)?t.mergeDeep(b(e.payload)):j.is(e)?t.set("state",e.payload):t}},913:function(t,e,n){"use strict";n.d(e,"b",(function(){return s})),n.d(e,"c",(function(){return f})),n.d(e,"a",(function(){return d}));var r=n(11),c=n.n(r),a=n(921),o=n(933),u=n(912),i=n(915),s=new a.State(c()({},u.d,u.b),c()({},u.d,u.e)),f=(Object(o.createConnect)(s),Object(o.createHook)(s)),d=Object(a.createDispatcher)(s,Object(a.mergeReducers)(c()({},u.d,u.f)));Object(i.a)().then((function(t){t.on("message",d)}))},914:function(t,e,n){"use strict";n.d(e,"a",(function(){return f})),n.d(e,"c",(function(){return d})),n.d(e,"b",(function(){return l}));var r=n(52),c=n.n(r),a=n(264),o=n(931),u="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",i="fishbowl-aicacia-com-";function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6;return Object(a.range)(0,t).iter().map((function(){return u.charAt(Math.floor(Math.random()*u.length))})).toArray().join("")}function f(t){return i+t}function d(t){return t.substring(i.length)}function l(){var t,e,n=arguments;return c.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:6,r.next=3,c.a.awrap(o.a.getItem("ID"));case 3:if(!(e=r.sent)){r.next=8;break}return r.abrupt("return",e);case 8:return e=s(t),r.next=11,c.a.awrap(o.a.setItem("ID",e));case 11:return r.abrupt("return",e);case 12:case"end":return r.stop()}}),null,null,null,Promise)}},915:function(t,e,n){"use strict";n.d(e,"a",(function(){return j})),n.d(e,"b",(function(){return h}));var r=n(52),c=n.n(r),a=n(17),o=n.n(a),u=n(264),i=n(923),s=n(0),f=n(919),d=n(924),l=n.n(d),b=n(914),p=Object(u.none)(),m=Object(u.none)(),O=new f.EventEmitter;function j(){return new Promise((function(t){return m.ifSome(t).ifNone((function(){return O.once("peer",t)}))}))}function h(){var t=Object(s.useState)(m.toJS()),e=o()(t,2),n=e[0],r=e[1];return Object(s.useEffect)((function(){null===n&&j().then(r)}),[n]),n}!function(){var t,e;c.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=b.a,n.next=3,c.a.awrap(Object(b.b)());case 3:return n.t1=n.sent,t=(0,n.t0)(n.t1),n.next=7,c.a.awrap(i.Peer.create(new l.a(t)));case 7:(e=n.sent).on("error",(function(t){console.error(t)})),p.replace(t),m.replace(e),O.emit("peer-id",t),O.emit("peer",e);case 13:case"end":return n.stop()}}),null,null,null,Promise)}()},918:function(t,e,n){"use strict";n.d(e,"c",(function(){return i})),n.d(e,"j",(function(){return s})),n.d(e,"i",(function(){return f})),n.d(e,"g",(function(){return d})),n.d(e,"h",(function(){return l})),n.d(e,"b",(function(){return r.c})),n.d(e,"a",(function(){return r.a})),n.d(e,"e",(function(){return b})),n.d(e,"d",(function(){return p})),n.d(e,"f",(function(){return m}));var r=n(912),c=n(913),a=n(915),o=n(935),u=n(914);function i(){var t=r.h.create(r.a.Lobby);Object(c.a)(t),Object(a.a)().then((function(e){return e.broadcast(t)}))}function s(){var t=r.h.create(r.a.Started);Object(c.a)(t),Object(a.a)().then((function(e){return e.broadcast(t)}))}var f=Object(o.debounce)((function(t,e){var n=r.j.create({team:t,name:e});Object(c.a)(n),Object(a.a)().then((function(t){return t.broadcast(n)}))}),500),d=Object(o.debounce)((function(t,e){var n=r.g.create({id:t,name:e});Object(c.a)(n),Object(a.a)().then((function(t){return t.broadcast(n)}))}),500);function l(t,e){var n=r.i.create({id:t,team:e});Object(c.a)(n),Object(a.a)().then((function(t){return t.broadcast(n)}))}function b(t){return t[r.d].state}function p(t){return t[r.d].peers}function m(t){return t[r.d].teams}Object(a.a)().then((function(t){d(t.getId(),Object(u.c)(t.getId())),t.on("connection",(function(e){var n=c.b.getCurrent().game;n.state!==r.a.None&&t.send(e,r.k.create(n.toJS()))}))}))},925:function(t,e){function n(t){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id=925},927:function(t,e,n){"use strict";n(918);var r=n(913);n.d(e,"a",(function(){return r.c}))},948:function(t,e,n){var r=n(949);function c(t){var e=function(){return e.called?e.value:(e.called=!0,e.value=t.apply(this,arguments))};return e.called=!1,e}function a(t){var e=function(){if(e.called)throw new Error(e.onceError);return e.called=!0,e.value=t.apply(this,arguments)},n=t.name||"Function wrapped with `once`";return e.onceError=n+" shouldn't be called more than once",e.called=!1,e}t.exports=r(c),t.exports.strict=r(a),c.proto=c((function(){Object.defineProperty(Function.prototype,"once",{value:function(){return c(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return a(this)},configurable:!0})}))},949:function(t,e){t.exports=function t(e,n){if(e&&n)return t(e)(n);if("function"!==typeof e)throw new TypeError("need wrapper function");return Object.keys(e).forEach((function(t){r[t]=e[t]})),r;function r(){for(var t=new Array(arguments.length),n=0;n<t.length;n++)t[n]=arguments[n];var r=e.apply(this,t),c=t[t.length-1];return"function"===typeof r&&r!==c&&Object.keys(c).forEach((function(t){r[t]=c[t]})),r}}},950:function(t){t.exports=JSON.parse('{"a":"41A895CA"}')},998:function(t,e,n){"use strict";n.r(e),n.d(e,"Game",(function(){return y}));var r=n(52),c=n.n(r),a=n(0),o=n.n(a),u=n(5),i=n(6),s=n(48),f=n(948),d=n.n(f),l=n(950);function b(t){return p(),o.a.createElement(u.a,t,o.a.createElement("google-cast-launcher",null))}var p=d()((function(){window.__onGCastApiAvailable=function(t,e){t?cast.framework.CastContext.getInstance().setOptions({receiverApplicationId:l.a,autoJoinPolicy:chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED}):console.error(e)};var t=document.createElement("script");t.src="//www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1",document.body.appendChild(t)})),m=n(918),O=n(927),j=n(915),h=n(914),v=i.a.create({castButton:{position:"absolute",right:8,top:8,width:32,height:32}});function y(t){var e=Object(j.b)(),n=Object(O.a)(m.e),r=Object(O.a)(m.d),i=Object(O.a)(m.f);return n!==m.a.Started&&Object(m.j)(),Object(a.useMemo)((function(){var n;return c.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(n=Object(h.a)(t.id),!e){r.next=10;break}if(n===e.getId()){r.next=10;break}return r.prev=3,r.next=6,c.a.awrap(e.connect(n));case 6:r.next=10;break;case 8:r.prev=8,r.t0=r.catch(3);case 10:case"end":return r.stop()}}),null,null,[[3,8]],Promise)}),[e,t.id]),o.a.createElement(u.a,null,o.a.createElement(s.Text,null,"My Id "+(null==e?void 0:e.getId())),o.a.createElement(s.Text,null,"Peers "+JSON.stringify(r,null,2)),o.a.createElement(s.Text,null,"Teams "+JSON.stringify(i,null,2)),o.a.createElement(b,{style:v.castButton}))}}}]);
//# sourceMappingURL=6.ab97d3eb.chunk.js.map